<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JSON load test</title>
</head>
<body>
<p id="id_log"></p>


<script>

    var url_json = "http://dev3.designfever.com/assets_login/temp/df_info_data.json.php" + "?uniq=" + new Date().getTime();


    function init() {

        var params = {
            method: "GET",
            action: url_json
        };

        var xhr = new XMLHttpRequest();
        xhr.overrideMimeType("application/json");
        xhr.open(params.method, params.action, true);
        xhr.onreadystatechange = function () {

            console.log("xhr.readyState : ", xhr.readyState);
            console.log("xhr.status : ", xhr.status);

            var log = document.getElementById('id_log');

            if (xhr.readyState == 4 && xhr.status == "200") {
                // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
                log.textContent  = log.textContent + "\n" + "url_json : " + url_json;
                console.log("xhr : " , xhr);

                onLoad(xhr.responseText);
            }

            /*
                        if (response.target.status === 0) {

                            // Failed XmlHttpRequest should be considered an undefined error.
                            console.log("xhr.onloadend (Failed) : " , xhr);

                        } else if (response.target.status === 400) {

                            // Bad Request
                            console.log("xhr.onloadend (Bad Request) : " , xhr);
                        } else if (response.target.status === 404) {

                            // Bad Request
                            console.log("xhr.onloadend (404 Not Found) : " , xhr);

                        } else if (response.target.status === 200) {

                        }*/

        };
        xhr.send(null);
    }

    function onLoad(responseText) {

        var json = JSON.parse(responseText);
        console.log(json);

        var log = document.getElementById('id_log');
        log.textContent = log.textContent +  "\n\n"+ JSON.stringify(json.user);
    }


init();


</script>
</body>
</html>